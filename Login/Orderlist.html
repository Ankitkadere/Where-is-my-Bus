<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Orders Details</title>
    <meta name="description" content="Gift Zone : Photo Frame's App" />
    <link rel="icon" href="fav.jpg" type="image/jpeg" />
    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.sw.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet" />
    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
    <link rel="manifest" href="manifest.json">
    <meta name="background-color" content="bg-blue-600" />
    <meta name="background-color" content="#000000" />
    <meta name="apple-mobile-web-app-title" content="Gift Zone">
    <link rel="apple-touch-icon" href="fav.jpg">
    <meta name="theme-color" content="#000000" />
    <meta name="apple-mobile-web-app-status-bar-style" content="#000000" />
    <meta name="msapplication-navbutton-color" content="#000000" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="manifest" href="manifest.json">
    <meta name="background-color" content="bg-blue-600" />
    <meta name="background-color" content="#000000" />
    <meta name="apple-mobile-web-app-title" content="Gift Zone">
    <link rel="apple-touch-icon" href="fav.jpg">
    <meta name="theme-color" content="#000000" />
    <meta name="apple-mobile-web-app-status-bar-style" content="#000000" />
    <meta name="msapplication-navbutton-color" content="#000000" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="Blocked.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>
<!-- Styles -->
<style>
    .step {
        text-align: center;
        flex: 1 1 20%;
    }

    .icon {
        width: 32px;
        height: 32px;
        background-color: #d1d5db;
        border-radius: 9999px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        margin: auto;
    }

    .line {
        width: 32px;
        height: 4px;
        background-color: #d1d5db;
        border-radius: 9999px;
    }

    .active .icon {
        background-color: #16a34a;
    }

    .active p {
        color: #16a34a;
        font-weight: 600;
    }

    .step p {
        margin-top: 4px;
        color: #6b7280;
    }
</style>
<style>
    body {
        font-family: 'Inter', sans-serif;
        margin: 0;
        padding: 0;
    }
</style>
<style>
    .step {
        text-align: center;
    }

    .icon {
        width: 32px;
        height: 32px;
        background-color: #d1d5db;
        /* gray-300 */
        border-radius: 9999px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        margin: auto;
    }

    .line {
        width: 32px;
        height: 4px;
        background-color: #d1d5db;
        border-radius: 9999px;
    }

    .active .icon {
        background-color: #16a34a;
        /* green-600 */
    }

    .active p {
        color: #16a34a;
        font-weight: 600;
    }

    .step p {
        margin-top: 4px;
        color: #6b7280;
        /* gray-500 */
    }
</style>
<style>
    .progress p,
    .track {
        font-size: 0.70rem;
    }
</style>

<body class="bg-gray-100 w-full top-0 left-0 fixed font-extrabold flex items-center justify-center pb-6">
    <div styl="background: linear-gradient(90deg, #b90f2a 0%, #2e143a 100%)"
        class="  w-full flex flex-col md:flex-row overflow-hidden">

        <!-- Toggle Button (Visible only on mobile) -->
        <div class="flex items-center md:px-0 px-2 h-full justify-between">
            <div class="flex w-full md:hidden  items-center justify-between p-2">
                <button id="menuToggle" type="button"
                    class="w-10 h-10 p-3 flex bg-black justify-center items-center rounded-full shadow-sm focus:outline-none">
                    <i class="fas fa-user text-xl text-white"></i>
                </button>

                <button onclick="window.location.href='index.html'" aria-label="Go back"
                    class="flex justify-center items-center">
                    <h1 class="mx-auto text-4xl sm:text-5xl leading-none
                        ">
                        Gift Zone
                    </h1>
                </button>
            </div>

            <button onclick="toggleMenu()" class="md:hidden hidden p-3 text-gray-700 focus:outline-none0">
                <i class="fas fa-ellipsis-v text-xl text-gray-700"></i>
            </button>

            <!-- Menu -->
            <div id="menu" class="hidden absolute right-0 top-12 w-40 bg-white border z-50 rounded-lg shadow-lg">
                <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">
                    <i class="fas fa-pen mr-2"></i> Edit
                </a>
                <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">
                    <i class="fas fa-trash mr-2"></i> Delete
                </a>
                <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">
                    <i class="fas fa-share mr-2"></i> Share
                </a>
            </div>

            <script>
                function toggleMenu() {
                    document.getElementById("menu").classList.toggle("hidden");
                }
            </script>
        </div>
        <div id="overlay" class="fixed z-50 left-0 inset-0 bg-black bg-opacity-50 hidden "></div>
        <!-- Sidebar -->

        <aside id="sidebar" class="fixed overflow-auto top-0 left-0 h-full z-50 w-full bg-gray-200 font-extrabold border-gray-200 flex flex-col pb-8
         transform -translate-x-0 transition-transform duration-300 ease-in-out
       md:-translate-x-0 md:w-56
         ">
            <div onclick="window.location.href='index.html'"
                class="relative bg-black text-white md:p-0 px-4 h-[50vh] text-center overflow-hidden rounded-b-3xl shadow-lg cursor-pointer transition-all duration-300 hover:opacity-95">
                <!-- Back / Title / Settings -->
                <div class="flex items-center justify-between md:hidden pt-4">
                    <button class="text-black  bg-white rounded-full p-2 hover:opacity-100"
                        onclick="event.stopPropagation(); window.history.back();">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                        </svg>
                    </button>
                    <button class="text-white opacity-90 hover:opacity-100 p-2" title="Settings"
                        onclick="event.stopPropagation(); ">
                        <div class="text-white text-[2rem] font-semibold tracking-wide">Gift Zone</div>
                    </button>
                </div>

                <!-- Avatar + Info -->
                <div class="flex flex-col items-center justify-center mt-10 md:mt-12 gap-3">
                    <div class="relative">
                        <img src="https://i.pravatar.cc/160?img=12" alt="avatar"
                            class="w-28 h-28 rounded-full ring-4 ring-white shadow-lg object-cover hover:scale-105 transition-transform duration-300" />
                    </div>

                    <div class="text-center">
                        <h2 id="loggedUserFName"
                            class="text-[2rem] md:text-[1.3rem] font-semibold md:text-2xl tracking-wide">
                            Gift Zone
                        </h2>
                        <p id="loggedUserEmail" class="text-lg text-blue-100 opacity-90">
                            giftzone@gmail.com
                        </p>
                    </div>

                    <div class="flex items-center justify-between gap-16 mt-4">
                        <div class="text-center">
                            <div class="text-white font-bold text-[1.5rem] md:text-xl">1,000</div>
                            <div class="text-xs text-blue-100">Followers</div>
                        </div>
                        <div class="text-center">
                            <div class="text-white font-bold text-[1.5rem] md:text-xl">1,200</div>
                            <div class="text-xs text-blue-100">Following</div>
                        </div>
                    </div>
                </div>

                <!-- Subtle gradient overlay -->
                <div
                    class="absolute inset-0 bg-gradient-to-t from-black/10 via-transparent to-transparent pointer-events-none">
                </div>
            </div>

            <nav
                class="flex flex-col md:space-y-0 space-y-3 text-gray-200 bg-gray-200 md:gap-0 gap-1 px-4 md:px-2 font-semibold">

                <button data-section="photos"
                    class="flex bg-indigo-600 md:bg-transparent  hidden items-center space-x-3 text-white text-semibold hover:text-orange-500 transition-colors px-3 py-3 rounded-md focus:outline-none text-base"
                    onclick="selectSection('photos', this)" type="button">
                    <i class="fas fa-camera text-base"></i>
                    <span>Photos</span>
                </button>

                <button data-section="sells"
                    class="flex bg-white md:bg-transparent  items-center space-x-3 text-orange-500 font-semibold px-3 py-3 rounded-md focus:outline-none text-base"
                    onclick="selectSection('sells', this)" type="button">
                    <i class="fas fa-shopping-cart text-base"></i>
                    <span>My Orders</span>
                </button>

                <button data-section="message"
                    class="flex bg-white md:bg-transparent  items-center space-x-3 text-white text-semibold hover:text-orange-500 transition-colors px-3 py-3 rounded-md focus:outline-none text-base"
                    onclick="selectSection('message', this)" type="button">
                    <i class="fas fa-comment-alt text-base"></i>
                    <span>Message</span>
                </button>

                <button data-section="help"
                    class="flex bg-white md:bg-transparent  items-center space-x-3 text-white text-semibold hover:text-orange-500 transition-colors px-3 py-3 rounded-md focus:outline-none text-base"
                    onclick="selectSection('help', this)" type="button">
                    <i class="fas fa-question-circle text-base"></i>
                    <span>Help</span>
                </button>

                <button data-section="setting"
                    class="flex bg-white md:bg-transparent  items-center space-x-3 text-white text-semibold hover:text-orange-500 transition-colors px-3 py-3 rounded-md focus:outline-none text-base"
                    onclick="selectSection('setting', this)" type="button">
                    <i class="fas fa-cog text-base"></i>
                    <span>Setting</span>
                </button>

                <button
                    class="hidden flex bg-white md:bg-transparent  items-center space-x-3 text-white text-semibold hover:text-orange-500 transition-colors px-3 py-3 rounded-md focus:outline-none text-base"
                    type="button">
                    <i class="fas fa-cog text-base"></i>
                    <span>Terms</span>
                </button>

            </nav>
            <div class=" fixed bottom-4 w-96 md:w-full justify-between px-2  mx-auto flex md:gap-2 gap-8">
                <button id="logout" class="flex-1 py-2 rounded-lg bg-black text-white hover:bg-slate-200">Log
                    Out</button>
                <button class="flex-1 py-2 rounded-lg bg-black text-white hover:bg-indigo-700">Follow</button>
            </div>
        </aside>

        <!-- Main content -->
        <main class="flex-1 px-2 md:p-2 md:ml-56 md:mx-1 flex flex-col overflow-auto overflow-x-auto">

            <!-- Sections container -->
            <section id="dashboard" class="hidden">
                <h2 class="text-orange-500 font-semibold text-xl mb-6">Dashboard</h2>
                <p class="text-gray-700 text-sm">Welcome to the Dashboard section. Here you can see your
                    overview and
                    stats.</p>
            </section>

            <section id="photos" class="hidden">
                <h2 class="text-orange-500 font-semibold text-xl mb-6">Photos</h2>
                <p class="text-gray-700 text-sm">View and upload photos here.</p>
            </section>

            <section id="sells" class="">
                <div class="flex justify-end"> <!-- ðŸ” Filter Section -->

                    <div class="mb-4 mx-1 flex justify-between md:justify-end space-x-4">
                        <select id="filterField"
                            class=" border rounded-lg shadow-sm p-2  md:pl-2 md:px-4   focus:outline-none text-sm">
                            <option value="">All Fields</option>
                            <option value="Id">Id</option>
                            <option value="Date">Date</option>
                            <option value="Time">Time</option>
                            <option value="Name">Name</option>
                            <option value="Number">Number</option>
                            <option value="Material">Material</option>
                            <option value="Color">Color</option>
                            <option value="State">State</option>
                            <option value="Status">Status</option>
                            <option value="Payment">Payment</option>

                        </select>

                        <input type="text" id="searchInput" placeholder="Search..."
                            class="md:w-80 w-[66vw] p-2 border rounded-lg shadow-sm  focus:outline-none text-sm">
                    </div>
                </div>
                <hr>
                <style>
                    .sells {
                        height: 100vh;
                        overflow: auto;
                    }
                </style>

                <div class=" md:mb-80  mx-auto">
                    <!-- Data Table -->
                    <div class="bg-white shadow rounded-lg md:mb-20 w-full h-full md:max-h-[98vh]">
                        <!-- Wrapper for scrolling -->
                        <div class="overflow-x-auto overflow-y-auto max-h-[98vh] md:max-h-[98vh]">
                            <table class="min-w-full border border-gray-200 text-xs text-gray-700">

                                <tbody id="tableBody"
                                    class="divide-y divide-gray-200 md:h-[88vh] h-[92vh] pb-20 flex w-full flex-wrap">

                                    <div id="page-loader" class=" fixed w-96 h-full  z-40">
                                        <!-- ðŸŒ€ Preloader Container -->
                                        <div id="preloader"
                                            class="space-y-2 md:space-x-6 animate-pulse md:flex md:w-full ">
                                            <!-- Card Skeleton -->
                                            <div
                                                class="bg-white shadow-md w-[98%] md:min-w-[90%] rounded-lg p-2 flex flex-col space-y-4">
                                                <div class="flex items-center space-x-4">
                                                    <div class="w-20 h-20 bg-gray-300 rounded-md"></div>
                                                    <div class="flex-1 space-y-2">
                                                        <div class="h-4 bg-gray-300 rounded w-3/4"></div>
                                                        <div class="h-3 bg-gray-200 rounded w-1/2"></div>
                                                        <div class="h-3 bg-gray-200 rounded w-2/3"></div>
                                                    </div>
                                                </div>

                                                <div class="relative w-full px-3 mt-1">
                                                    <div
                                                        class="absolute top-[0.70rem] w-[90%] ml-2 h-[0.20rem] bg-gray-300 rounded">
                                                    </div>
                                                    <div class="flex justify-between ">
                                                        <div class="w-6 h-6 bg-gray-300 rounded-full"></div>
                                                        <div class="w-6 h-6 bg-gray-300 rounded-full"></div>
                                                        <div class="w-6 h-6 bg-gray-300 rounded-full"></div>
                                                        <div class="w-6 h-6 bg-gray-300 rounded-full"></div>
                                                    </div>
                                                </div>

                                                <div class="flex justify-between ">
                                                    <div class="w-20 h-6 bg-gray-300 rounded"></div>
                                                    <div class="w-16 h-6 bg-gray-400 rounded"></div>
                                                </div>
                                            </div>
                                            <!-- Duplicate skeletons for more items -->
                                            <div
                                                class="bg-white shadow-md w-[98%] md:min-w-[90%] rounded-lg p-2 flex flex-col space-y-4">
                                                <div class="flex items-center space-x-4">
                                                    <div class="w-20 h-20 bg-gray-300 rounded-md"></div>
                                                    <div class="flex-1 space-y-2">
                                                        <div class="h-4 bg-gray-300 rounded w-3/4"></div>
                                                        <div class="h-3 bg-gray-200 rounded w-1/2"></div>
                                                        <div class="h-3 bg-gray-200 rounded w-2/3"></div>
                                                    </div>
                                                </div>

                                                <div class="relative w-full px-3 mt-1">
                                                    <div
                                                        class="absolute top-[0.70rem] w-[90%] ml-2 h-[0.20rem] bg-gray-300 rounded">
                                                    </div>
                                                    <div class="flex justify-between ">
                                                        <div class="w-6 h-6 bg-gray-300 rounded-full"></div>
                                                        <div class="w-6 h-6 bg-gray-300 rounded-full"></div>
                                                        <div class="w-6 h-6 bg-gray-300 rounded-full"></div>
                                                        <div class="w-6 h-6 bg-gray-300 rounded-full"></div>
                                                    </div>
                                                </div>

                                                <div class="flex justify-between ">
                                                    <div class="w-20 h-6 bg-gray-300 rounded"></div>
                                                    <div class="w-16 h-6 bg-gray-400 rounded"></div>
                                                </div>
                                            </div>
                                            <div
                                                class="bg-white shadow-md w-[98%] md:min-w-[90%] rounded-lg p-2 flex flex-col space-y-4">
                                                <div class="flex items-center space-x-4">
                                                    <div class="w-20 h-20 bg-gray-300 rounded-md"></div>
                                                    <div class="flex-1 space-y-2">
                                                        <div class="h-4 bg-gray-300 rounded w-3/4"></div>
                                                        <div class="h-3 bg-gray-200 rounded w-1/2"></div>
                                                        <div class="h-3 bg-gray-200 rounded w-2/3"></div>
                                                    </div>
                                                </div>

                                                <div class="relative w-full px-3 mt-1">
                                                    <div
                                                        class="absolute top-[0.70rem] w-[90%] ml-2 h-[0.20rem] bg-gray-300 rounded">
                                                    </div>
                                                    <div class="flex justify-between ">
                                                        <div class="w-6 h-6 bg-gray-300 rounded-full"></div>
                                                        <div class="w-6 h-6 bg-gray-300 rounded-full"></div>
                                                        <div class="w-6 h-6 bg-gray-300 rounded-full"></div>
                                                        <div class="w-6 h-6 bg-gray-300 rounded-full"></div>
                                                    </div>
                                                </div>

                                                <div class="flex justify-between ">
                                                    <div class="w-20 h-6 bg-gray-300 rounded"></div>
                                                    <div class="w-16 h-6 bg-gray-400 rounded"></div>
                                                </div>
                                            </div>


                                        </div>

                                    </div>
                                    <script>setTimeout(() => {
                                            const loader = document.getElementById('page-loader');
                                            const name = document.getElementById('loggedUserFName').innerText;
                                            const mail = document.getElementById('loggedUserEmail').innerText;
                                            if (name == "" || mail == "") {
                                                window.location.href = "Owner.html";
                                            }
                                            if (loader) {
                                                setTimeout(() => loader.remove(), 600); // Remove after fade-out
                                            }
                                        }, 5000);


                                    </script>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- Form (hidden by default) -->
                    <div id="formContainer" class="fixed hidden shadow-[0_8px_80px_black] inset-0 md:mx-auto m-2 mb-4 md:top-10 h-full bottom-auto md:max-h-[85vh] md:max-w-7xl overflow-y-auto 
                           bg-white rounded-3xl shadow-2xl border border-orange-300 p-4">
                        <h2 id="formTitle"
                            class="text-2xl font-semibold mb-8 text-orange-500 border-b border-orange-300 pb-3 flex items-center gap-2">
                            <i class="fas fa-plus-circle text-orange-500"></i> Add Record
                        </h2>
                        <form id="crudForm" class="w-full text-sm grid grid-cols-1 md:grid-cols-4   gap-x-6 gap-y-4">
                            <input type="hidden" id="Id" name="Id" />

                            <div>
                                <label class="block text-orange-500 font-medium mb-1" for="Date">Date</label>
                                <input type="text" id="Date" name="Date" placeholder="YYYY-MM-DD"
                                    class="w-full  p-2.5 border border-orange-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 transition" />
                            </div>

                            <div>
                                <label class="block text-orange-500 font-medium mb-1" for="Time">Time</label>
                                <input type="text" id="Time" name="Time" placeholder="HH:MM AM/PM"
                                    class="w-full p-2.5 border border-orange-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 transition" />
                            </div>

                            <div>
                                <label class="block  text-orange-500 font-medium mb-1" for="Name">Name</label>
                                <input type="text" id="Name" name="Name"
                                    class="w-full p-2.5 border border-orange-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 transition" />
                            </div>

                            <div>
                                <label class="block text-orange-500 font-medium mb-1" for="Number">Number</label>
                                <input type="text" id="Number" name="Number"
                                    class="w-full p-2.5 border border-orange-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 transition" />
                            </div>

                            <div>
                                <label class="block text-orange-500 font-medium mb-1" for="Size">Size</label>
                                <input type="text" id="Size" name="Size"
                                    class="w-full p-2.5 border border-orange-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 transition" />
                            </div>

                            <div>
                                <label class="block text-orange-500 font-medium mb-1" for="Material">Material</label>
                                <input type="text" id="Material" name="Material"
                                    class="w-full p-2.5 border border-orange-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 transition" />
                            </div>

                            <div>
                                <label class="block text-orange-500 font-medium mb-1" for="Color">Color</label>
                                <input type="text" id="Color" name="Color"
                                    class="w-full p-2.5 border border-orange-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 transition" />
                            </div>

                            <div>
                                <label class="block text-orange-500 font-medium mb-1" for="Address">Address</label>
                                <input type="text" id="Address" name="Address"
                                    class="w-full p-2.5 border border-orange-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 transition" />
                            </div>

                            <div>
                                <label class="block text-orange-500 font-medium mb-1" for="City">City</label>
                                <input type="text" id="City" name="City"
                                    class="w-full p-2.5 border border-orange-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 transition" />
                            </div>

                            <div>
                                <label class="block text-orange-500 font-medium mb-1" for="Pincode">Pincode</label>
                                <input type="text" id="Pincode" name="Pincode"
                                    class="w-full p-2.5 border border-orange-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 transition" />
                            </div>

                            <div>
                                <label class="block text-orange-500 font-medium mb-1" for="State">State</label>
                                <input type="text" id="State" name="State"
                                    class="w-full p-2.5 border border-orange-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 transition" />
                            </div>

                            <div>
                                <label class="block text-orange-500 font-medium mb-1" for="Status">Status</label>
                                <input type="text" id="Status" name="Status"
                                    class="w-full p-2.5 border border-orange-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 transition" />
                            </div>

                            <div>
                                <label class="block text-orange-500 font-medium mb-1" for="Payment">Payment</label>
                                <input type="text" id="Payment" name="Payment"
                                    class="w-full p-2.5 border border-orange-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 transition" />
                            </div>

                            <div>
                                <label class="block text-orange-500 font-medium mb-1" for="Other">Other</label>
                                <input type="text" id="Other" name="Other"
                                    class="w-full p-2.5 border border-orange-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400 transition" />
                            </div>

                            <div class="md:col-span-2">
                                <label class="block text-orange-500 font-medium mb-1" for="ImageInput">Upload
                                    Image</label>
                                <input type="file" id="ImageInput" name="ImageInput" accept="image/*"
                                    class="w-full border border-orange-300 rounded-lg p-2 cursor-pointer text-orange-600 hover:border-orange-400 transition" />
                            </div>

                            <div
                                class="md:col-span-2 w-full flex md:justify-end justify-between md:ml-28 space-x-4 mt-6">
                                <button type="button" onclick="hideForm()"
                                    class="px-6 py-2.5 bg-orange-200 text-orange-700 font-semibold rounded-lg hover:bg-orange-300 transition flex items-center gap-2">
                                    <i class="fas fa-times"></i> Cancel
                                </button>
                                <button type="submit"
                                    class="px-6 py-2.5 bg-orange-600 text-white font-semibold rounded-lg hover:bg-orange-700 transition flex items-center gap-2">
                                    <i class="fas fa-save"></i> Save
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Add Button -->
                </div>

                <script>
                    const API_URL = "https://script.google.com/macros/s/AKfycby_gJSJorghtpLgbZjHKO4eJ4f0S1HwDF89FpmFng4CcMedA7L--y8flV_HCaRb2LE-/exec";
                    let editing = false;
                    let userRecords = []; // only records for the logged-in user

                    function formatDate(dateValue) {
                        if (!dateValue) return "";
                        if (!isNaN(dateValue)) {
                            let jsDate = new Date(Math.round((dateValue - 25569) * 86400 * 1000));
                            return jsDate.toLocaleDateString("en-GB");
                        }
                        let date = new Date(dateValue);
                        if (isNaN(date)) return dateValue;
                        return date.toLocaleDateString("en-GB");
                    }

                    function formatTime(timeValue) {
                        if (!timeValue) return "";
                        if (!isNaN(timeValue)) {
                            let totalMinutes = Math.round(timeValue * 24 * 60);
                            let hours = Math.floor(totalMinutes / 60);
                            let minutes = totalMinutes % 60;
                            let period = hours >= 12 ? "PM" : "AM";
                            hours = hours % 12 || 12;
                            return `${hours}:${minutes.toString().padStart(2, "0")} ${period}`;
                        }
                        let date = new Date(`1970-01-01T${timeValue}`);
                        if (isNaN(date)) return timeValue;
                        return date.toLocaleTimeString("en-US", { hour: "numeric", minute: "2-digit", hour12: true });
                    }

                    function renderTable(records) {
                        const tbody = document.getElementById("tableBody");
                        tbody.innerHTML = "";

                        if (!records.length) {
                            tbody.innerHTML = `
    <div class="text-center text-black font-extrabold py-6 w-full">
      <p>No Oders Found.</p>
      <button onclick="location.reload()" 
        class="mt-3 px-8 py-4 bg-black text-white rounded-md hover:bg-gray-800 transition">
        Reload
      </button>
    </div>`;
                            return;
                        }


                   records.slice().reverse().forEach((record, index) => {
                            tbody.innerHTML += `
      <div class="bg-white shadow-md rounded-lg mb-1 pb-1 w-full md:w-[30%] md:mx-4 overflow-hidden ">
        <div class="p-2 md:flex items-start justify-between">
          <div class="flex items-start object-cover">
            <img src="${record.Icon}" alt="Product" class="w-20 h-20 rounded border-2" />
            <div class="ml-4">
              <h3 class="text-lg font-semibold text-gray-800">${record.Other}</h3>
              <p class="text-sm text-gray-500">Order ID: <span class="font-medium">#${record.Id}</span></p>
              <p class="text-sm text-green-600 mt-1 font-medium">Delivered  : ${formatDate(record.Delivered)}</p>
            </div>
          </div>
                  
                     <input id="n-${record.Id}" value="${record.Level}"  type="text" min="1" max="4"
                            placeholder="1-4" class="hidden"></div>
                    <div class="relative w-full md:px-4 px-3 mx-auto z-10 overflow-hidden">
                        <div class="absolute top-[0.40rem] w-[90%] md:ml-0 ml-2 h-[0.20rem] bg-gray-300 rounded"></div>
                        <div id="progress-${record.Id}"
                            class="absolute md:w-[83%] w-[90%] top-[0.40rem] md:ml-0 h-[0.20rem] ml-2 md:ml-1 mr-4 bg-gray-600 rounded transition-all duration-500"
                            style="width:0%"></div>
                        <div class="flex justify-between relative z-10">
                            <div id="${record.Id + 1}" class="flex flex-col progress items-center">
                                <div id="box1-${record.Id}"
                                    class="w-0 p-[0.10rem] h-0 rounded-full border-4 border-gray-300 flex items-center justify-center bg-white">
                                    <box-icon name='cart' ></box-icon>
                                </div>
                                <p class=" text-sm">Order</p>
                            </div>
                            <div id="${record.Id + 2}" class="flex flex-col progress items-center">
                                <div  id="box2-${record.Id}"
                                    class="w-0 p-[0.10rem] h-0 rounded-full border-4 border-gray-300 flex items-center justify-center bg-white">
                                    <box-icon name='truck'></box-icon>
                                </div>
                                <p class=" text-sm">Shipped</p>
                            </div>
                            <div id="${record.Id + 3}" class="flex flex-col progress items-center">
                                <div  id="box3-${record.Id}"
                                    class="w-0 p-[0.10rem] h-0 rounded-full border-4 border-gray-300 flex items-center justify-center bg-white">
                                    <box-icon name='navigation'></box-icon>
                                </div>
                                <p class=" text-sm">Out</p>
                            </div>
                            <div id="${record.Id + 4}" class="flex flex-col progress items-center">
                                <div  id="box4-${record.Id}"
                                    class="w-0 p-[0.20rem] h-0 rounded-full border-4 border-gray-300 flex items-center justify-center bg-white">
                                    <box-icon name='check-circle'></box-icon>
                                </div>
                                <p class="  text-sm">Done</p>
                            </div>
                        </div>
                    </div>  

          <div class=" px-2 flex flex-wrap gap-2 justify-between w-full md:w-auto">
            <button class="text-black font-extrabold  py-0  rounded-md  text-sm">${record.Size}</button>
            <button onclick='deleteRecord("${record.Id}")' class="bg-gray-200 text-black font-semibold px-3 py-1 rounded-md hover:bg-black hover:text-white text-sm">Cancel</button>
          </div>
        </div>
      </div>`;
                        });
                    }


                    setInterval(() => {
                        document.querySelectorAll("[id^='n-']").forEach(n => {
                            const id = n.id.split("-")[1];
                            const progress = document.getElementById(`progress-${id}`);

                            const update = () => {
                                const v = parseInt(n.value) || 1;
                                const w = ((v - 1) / 3.4) * 100; // total 4 steps
                                progress.style.width = w + "%";

                                for (let i = 1; i <= 4; i++) {
                                    const box = document.querySelector(`#box${i}-${id}`);
                                    if (box) {
                                        box.className =
                                            "w-4 h-4 rounded-full border-4 flex items-center justify-center transition-all duration-300 " +
                                            (i <= v ? "bg-green-400 border-gray-400 text-white" : "bg-white border-gray-200 text-black");
                                        const icon = box.querySelector("box-icon");
                                        if (icon) icon.setAttribute("color", i <= v ? "white" : "black");
                                    }
                                }
                            };

                            update();
                        });
                    }, 1000);



                    // Fetch records only for logged-in user
                    async function fetchRecords() {
                        const res = await fetch(`${API_URL}?action=read`);
                        const data = await res.json();
                        const mail = document.getElementById("loggedUserEmail").innerText.trim();
                        userRecords = data.records.filter(record => record.Filtered.trim() === mail); // only user records
                        renderTable(userRecords);
                    }
                    function loaders() {
                        const loader = document.getElementById('page-loader');
                        loader.classList.add('opacity-0', 'transition-opacity', 'duration-500');
                        setTimeout(() => {
                            loader.classList.add('hidden'); // hide visually
                            loader.remove(); // fully remove from DOM
                        }, 3000);
                    }
                    // Delete record
                    async function deleteRecord(id) {

                        if (!confirm("Are you sure ?")) return;
                        await fetch(API_URL, { method: "POST", body: new URLSearchParams({ action: "delete", Id: id }) });
                        fetchRecords();

                    }

                    // Search/filter for user's records only
                    document.getElementById("searchInput").addEventListener("input", applyFilter);
                    document.getElementById("filterField").addEventListener("change", applyFilter);

                    function applyFilter() {
                        const query = document.getElementById("searchInput").value.toLowerCase().trim();
                        const field = document.getElementById("filterField").value;

                        const filtered = userRecords.filter(record => {
                            if (!query) return true;
                            if (field) return String(record[field] || "").toLowerCase().includes(query);
                            return Object.values(record).some(val => String(val).toLowerCase().includes(query));
                        });

                        renderTable(filtered);
                    }

                    // Form handling
                    function showForm(record = null) {
                        document.getElementById("formContainer").classList.remove("hidden");
                        document.getElementById("crudForm").reset();
                        document.getElementById("formTitle").innerText = record ? "Edit Record" : "Add Record";
                        editing = !!record;
                        if (record) {
                            Object.keys(record).forEach(key => {
                                let input = document.querySelector(`[name="${key}"]`);
                                if (input) input.value = record[key];
                            });
                        }
                    }
                    function hideForm() { document.getElementById("formContainer").classList.add("hidden"); }

                    document.getElementById("crudForm").addEventListener("submit", async (e) => {
                        e.preventDefault();
                        const formData = new FormData(e.target);
                        let payload = { action: editing ? "update" : "create" };
                        for (const [key, val] of formData.entries()) payload[key] = val;

                        const fileInput = document.getElementById("ImageInput");
                        if (fileInput && fileInput.files.length > 0) {
                            payload.Image = await getBase64(fileInput.files[0]);
                            payload.ImageName = fileInput.files[0].name;
                        }

                        await fetch(API_URL, { method: "POST", body: new URLSearchParams(payload) });
                        hideForm();
                        fetchRecords();
                    });

                    function getBase64(file) {
                        return new Promise((resolve, reject) => {
                            const reader = new FileReader();
                            reader.readAsDataURL(file);
                            reader.onload = () => resolve(reader.result);
                            reader.onerror = err => reject(err);
                        });
                    }

                    // Initial fetch
                    fetchRecords();
                </script>

            </section>

            <section id="message" class="hidden">
                <h2 class="text-orange-500 font-semibold text-xl mb-6">Message</h2>
                <p class="text-gray-700 text-sm">This is the Message section. View and send messages here.
                </p>
            </section>

            <section id="help" class="hidden">
                <h2 class="text-orange-500 font-semibold text-xl mb-6">Help</h2>
                <p class="text-gray-700 text-sm">Help section content goes here. Find FAQs and support.</p>
            </section>

            <section id="setting" class="hidden">
                <h2 class="text-orange-500 font-semibold text-xl mb-6">Setting</h2>
                <p class="text-gray-700 text-sm">Manage your settings and preferences here.</p>
            </section>
        </main>
    </div>

    <script>
        //Side Navbar 
        function selectSection(sectionId, btn) {
            // Hide all sections
            const sections = document.querySelectorAll('main > section');
            sections.forEach((section) => {
                section.classList.add('hidden');
            });

            // Show selected section
            const selectedSection = document.getElementById(sectionId);
            if (selectedSection) {
                selectedSection.classList.remove('hidden');
            }

            // Update sidebar active states
            const buttons = document.querySelectorAll('aside nav button');
            buttons.forEach((button) => {
                if (button === btn) {
                    button.classList.add('text-orange-500', 'font-semibold');
                    button.classList.remove('text-gray-400');
                } else {
                    button.classList.remove('text-orange-500', 'font-semibold');
                    button.classList.add('text-gray-800');
                }
            });
        }

        // On page load, show "sells" section by default and highlight its menu item
        window.addEventListener('DOMContentLoaded', () => {
            const defaultSection = 'sells';
            const defaultBtn = document.querySelector(`aside nav button[data-section="${defaultSection}"]`);
            if (defaultBtn) {
                selectSection(defaultSection, defaultBtn);
            }
        });
    </script>

    <script>
        const toggleBtn = document.getElementById("menuToggle");
        const sidebar = document.getElementById("sidebar");
        const overlay = document.getElementById("overlay");

        function openSidebar() {
            sidebar.classList.remove("-translate-x-full");
            overlay.classList.remove("hidden");
        }

        function closeSidebar() {
            sidebar.classList.add("-translate-x-full");
            overlay.classList.add("hidden");
        }

        toggleBtn.addEventListener("click", () => {
            if (sidebar.classList.contains("-translate-x-full")) {
                openSidebar();
            } else {
                closeSidebar();
            }
        });

        overlay.addEventListener("click", closeSidebar);

        // Optional: close sidebar when clicking a menu item (mobile only)
        sidebar.querySelectorAll("button").forEach(btn => {
            btn.addEventListener("click", () => {
                if (window.innerWidth < 768) closeSidebar();
            });
        });
    </script>

</body>
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js";
    import {
        getAuth,
        onAuthStateChanged,
        signOut
    } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-auth.js";
    import {
        getFirestore,
        getDoc,
        doc
    } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-firestore.js";

    // âœ… Your Firebase config (USE YOUR OWN VALUES HERE)
    const firebaseConfig = {
        apiKey: "AIzaSyAKN5GR18VTFrKNgVG7FenD4aSTX3Q2PbA",
        authDomain: "gift-zone-project.firebaseapp.com",
        projectId: "gift-zone-project",
        storageBucket: "gift-zone-project.appspot.com",
        messagingSenderId: "806465456032",
        appId: "1:806465456032:web:becf8988a6dfabe43646c5",
        measurementId: "G-1ZLMWBP61Y",
    };

    // âœ… Initialize Firebase services
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    // âœ… On Auth Change: fetch and show user data
    onAuthStateChanged(auth, (user) => {
        if (user) {
            const loggedInUserId = localStorage.getItem("loggedInUserId");
            if (!loggedInUserId) {
                console.log("User ID not found in local storage.");
                return;
            }

            const docRef = doc(db, "users", loggedInUserId);
            getDoc(docRef)
                .then((docSnap) => {
                    if (docSnap.exists()) {
                        const userData = docSnap.data();
                        let filt = document.getElementById("loggedUserFName").innerText = userData.firstName || "N/A";
                        document.getElementById("loggedUserEmail").innerText = userData.email || "N/A";
                        document.getElementById("filter").value = filt;
                        // âœ… Optional: handle missing lastName gracefully
                        const lNameElement = document.getElementById("loggedUserLName");
                        if (userData.lastName) {
                            lNameElement.innerText = userData.lastName;
                        } else {
                            lNameElement.innerText = "-";
                        }
                    } else {
                        console.log("No user document found in Firestore.");
                    }
                })
                .catch((error) => {
                    console.error("Error fetching user data:", error);
                });
        } else {
            console.log("User not signed in.");
            window.location.href = "Owner.html"; // Redirect to login
        }
    });

    // âœ… Logout
    const logoutButton = document.getElementById("logout");
    logoutButton.addEventListener("click", () => {
        localStorage.removeItem("loggedInUserId");
        signOut(auth)
            .then(() => {
                window.location.href = "Owner.html";
            })
            .catch((error) => {
                console.error("Error signing out:", error);
            });
    });

</script>

</html>