<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ticket Checker</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
  <script src="Blocked.js"></script>
</head>
<style>
  .blur {
    filter: blur(10px);
  }
</style>

<body class="bg-gray-100  items-center justify-center">
  <!-- Header -->
  <header class="bg-[#1a62a3] pt-2 ">
    <div class="flex bottom-4 text-white items-center justify-between w-full px-4  space-x-2 ">
      <div id="mobile-menu-button" aria-label="Toggle menu"
        class="flex items-center gap-4 justify-between text-white hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
        <i class="fas fa-bars text-xl"></i>
        <a href="index.html" class="flex items-center ml-2">
          <h1 class="font-extrabold text-xl leading-none md:pt-3">
            Where is my Bus
          </h1>
        </a>
      </div>


      <div class=" flex gap-2  text-left">
        <!-- Trigger -->
        <div id="menuAppDownload" onclick="toggleMenu()" class=" text-white p-2 rounded-full ">
          <i class="fas fa-mobile-alt text-white text-xl"></i>
        </div>
        <!-- Menu -->
        <div id="menu" onclick="toggleMenu()"
          class="hidden fixed left-0 top-0 w-full h-full mt-2  bg-gray-10 border z-[150] justify-center rounded-lg shadow-lg">

          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
          <style>
            /* Custom animation for fade in/out */
            .fade-in {
              animation: fadeInScale 0.3s forwards;
            }

            .fade-out {
              animation: fadeOutScale 0.3s forwards;
            }

            @keyframes fadeInScale {
              0% {
                opacity: 0;
                transform: scale(0.95);
              }

              100% {
                opacity: 1;
                transform: scale(1);
              }
            }

            @keyframes fadeOutScale {
              0% {
                opacity: 1;
                transform: scale(1);
              }

              100% {
                opacity: 0;
                transform: scale(0.95);
              }
            }
          </style>

          <div class="block  fixed top-0 left-0  text-gray-700 hover:bg-gray-100">
            <button id="PWA"
              class="flex fixed  items-center w-full h-full  justify-center gap-2 bg-black text-white px-6 opacity-70  py-3  font-semibold hover:bg-gray-700 transition">
              <i id="pwaInstallBtn" class="fas fa-mobile-alt text-9xl">
                <p id="installStatusMsg" class="mt-2 text-base text-white"> Install Now</p>
              </i>

            </button>

          </div>

          <script>
            const pwaBtn = document.getElementById('pwaInstallBtn');
            const statusMsg = document.getElementById('installStatusMsg');
            let deferredPrompt = null;
            let appInstalled = false;

            // Disable button until PWA prompt is ready
            pwaBtn.disabled = true;

            // Listen for beforeinstallprompt event
            window.addEventListener('beforeinstallprompt', (e) => {
              e.preventDefault(); // Prevent auto prompt
              deferredPrompt = e;
              pwaBtn.disabled = false;
              statusMsg.textContent = " Install Now";
            });

            // Handle button click
            pwaBtn.addEventListener('click', async () => {
              if (appInstalled) {
                statusMsg.textContent = " Already installed.";
                return;
              }


              if (!deferredPrompt) {
                statusMsg.textContent = "âš ï¸ Your Device Does Not Support App";
                toggleMenu();
                return;
              }

              // Show the PWA install prompt
              deferredPrompt.prompt();
              const choice = await deferredPrompt.userChoice;

              if (choice.outcome === 'accepted') {
                statusMsg.textContent = "ðŸŽ‰ App Installed Successfully!";
                appInstalled = true;
              } else {
                statusMsg.textContent = "âŒ Install Dismissed By User.";
              }

              deferredPrompt = null;
              pwaBtn.disabled = true;
            });

            // Listen for actual app installation
            window.addEventListener('appinstalled', () => {
              statusMsg.textContent = "ðŸŽ‰ App Installed Successfully!";
              appInstalled = true;
              pwaBtn.disabled = true;
            });
          </script>

          <a href="#" class="hidden  block px-4 py-2 text-gray-700 hover:bg-gray-100">
            <i class="fas fa-share mr-2"></i> Share
          </a>
        </div>
        <!-- Settings Button -->
        <div onclick="toggleSetting()" class="text-white p-2 rounded-full cursor-pointer ">
          <i class="fas fa-cog text-white text-xl"></i>
        </div>
        <!-- Overlay + Panel -->
        <div id="menuOverlay" class="fixed inset-0 bg-black/50 hidden z-40 flex justify-center items-start pt-20">

          <!-- Dropdown Panel -->
          <div id="menuPanel"
            class="w-full max-w-md bg-white shadow-lg transform -translate-y-full transition-transform duration-300 rounded-lg">

            <div class="p-4 relative">
              <!-- Close Button -->
              <button onclick="toggleSetting()" class="absolute right-4 top-4 text-gray-600 hover:text-black text-xl">
                <i class="fas fa-times"></i>
              </button>
              <!-- NAV CONTENT INSIDE PANEL -->
              <nav class="p-4">
                <!-- Top Section -->
                <div class="font-semibold text-gray-800 mb-4 flex items-center justify-between cursor-pointer">
                  <span>SERVICES BY BUS</span>
                  <i class="fas fa-chevron-right text-sm"></i>
                </div>

                <!-- Menu Items Grid: 2 per row -->
                <div class="grid grid-cols-2 gap-3 text-white text-sm">
                  <a href="index.html" class="p-4 rounded-lg bg-blue-500 text-center font-semibold hover:bg-blue-600">
                    <i class="fas fa-home mb-1"></i><br>Home
                  </a>
                  <a href="Adminpenel.html"
                    class="p-4 rounded-lg bg-green-500 text-center font-semibold hover:bg-green-600">
                    <i class="fas fa-user-shield mb-1"></i><br>Booking
                  </a>
                  <a href="Userchat.html"
                    class="p-4 rounded-lg bg-purple-500 text-center font-semibold hover:bg-purple-600">
                    <i class="fas fa-tv mb-1"></i><br>Services
                  </a>
                  <a href="#" class="p-4 rounded-lg bg-red-500 text-center font-semibold hover:bg-red-600">
                    <i class="fas fa-clock mb-1"></i><br>Change Time
                  </a>
                  <a href="#" class="p-4 rounded-lg bg-indigo-500 text-center font-semibold hover:bg-indigo-600">
                    <i class="fas fa-trash mb-1"></i><br>Remove Something
                  </a>
                  <a href="#" class="p-4 rounded-lg bg-teal-500 text-center font-semibold hover:bg-teal-600">
                    <i class="fas fa-map-marker-alt mb-1"></i><br>Add Location
                  </a>
                  <a href="#" class="p-4 rounded-lg bg-orange-500 text-center font-semibold hover:bg-orange-600">
                    <i class="fas fa-bus mb-1"></i><br>Add Buses
                  </a>
                </div>

                <!-- Bottom Bar -->
                <div class="border-t mt-4 pt-4 flex items-center justify-between text-sm">
                  <div onclick="window.location.href='Owner.html'" class="cursor-pointer">
                    <div class="font-semibold">Whereis My Bus</div>
                    <div class="text-xs text-gray-500">Whereismybus.com</div>
                  </div>

                  <button title="Profile" onclick="window.location.href='Orderlist.html'"
                    class="text-gray-600 hover:text-blue-600 transition">
                    <i class="fas fa-shopping-cart text-lg"></i>
                  </button>
                </div>
              </nav>

            </div>

          </div>
        </div>
        <script>
          function toggleSetting() {
            const overlay = document.getElementById("menuOverlay");
            const panel = document.getElementById("menuPanel");

            if (overlay.classList.contains("hidden")) {
              overlay.classList.remove("hidden");
              setTimeout(() => panel.classList.remove("-translate-y-full"), 10);
            } else {
              panel.classList.add("-translate-y-full");
              setTimeout(() => overlay.classList.add("hidden"), 300);
            }
          }

          // Close when clicking outside panel
          document.getElementById("menuOverlay").addEventListener("click", function (e) {
            if (e.target.id === "menuOverlay") toggleSetting();
          });
        </script>
      </div>
    </div>
    <!-- Tabs -->
    <nav class="pt-4 flex border-b border-b-white/50 text-white text-lg font-bold">
      <a href="index.html" onclick="showTab('buses')" id="tab-buses"
        class="flex-1 text-center py-3 border-white select-none">
        Buses
      </a>

      <a href="Booking.html" onclick="showTab('booking')" id="tab-booking"
        class="flex-1  border-b-4 border-white text-center py-3 select-none">
        Booking
      </a>
    </nav>

    <!-- Script -->
    <script>
      function showTab(tab) {
        // hide all sections
        document.querySelectorAll('.tab-content').forEach(el => {
          el.classList.add('hidden');
        });

        // remove active style
        document.querySelectorAll('[id^="tab-"]').forEach(el => {
          el.classList.remove('border-b-4', 'border-white');
        });

        // show selected section
        document.getElementById(tab).classList.remove('hidden');

        // activate selected tab
        document.getElementById('tab-' + tab)
          .classList.add('border-b-4', 'border-white');
      }
    </script>

  </header>
  <!-- Mobile Side Navbar -->
  <div id="mobile-nav"
    class="bg-white z-[100]  fixed inset-y-0 left-0 w-80  shadow-lg transform -translate-x-full transition-transform duration-300 ease-in-out z-50 overflow-y-auto">
    <div class="flex bg-[#1a62a3] items-center justify-between px-4 py-3 border-b border-gray-200">
      <a href="index.html" class="flex items-center text-white space-x-2 pt-2">
        <i class="fas fa-bus fa-3x   "></i>
        <h1 class="font-extrabold w-full pr-2 text-2xl leading-none">
          Where is my Bus
          <span class="font-normal  text-base sm:text-lg ">
            Google
          </span>
        </h1>
      </a>

      <button id="mobile-menu-close" aria-label="Close menu"
        class="text-gray-700 hover:text-gray-900 focus:outline-none">
      </button>
    </div>
    <div class="bg-[#1a62a3] px-1 py-1 border-b border-gray-200">
      <div class="relative w-full">
        <input aria-label="Search for products"
          class="w-full  border border-gray-400 rounded-md py-2 pl-3 pr-10 text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:border-transparent"
          placeholder="Search For ..." type="search" />

        <span class="absolute inset-y-0 right-3 flex items-center text-gray-500">
          <i class="fas fa-search text-[#1a62a3] text-lg"></i>
        </span>
      </div>
    </div>

    <nav class="text-[#1a62a3] flex flex-col">
      <!-- Top Section -->
      <div class="p-4">
        <!-- Title -->
        <div class="flex items-center justify-between font-semibold text-gray-800 mb-4 cursor-pointer">
          <span>SERVICES BY BUS</span>
          <i class="fas fa-chevron-down text-sm"></i>
        </div>

        <!-- Menu -->
        <div class="grid grid-cols-2 gap-3 text-white text-sm">
          <a href="index.html" class="p-4 rounded-lg bg-blue-500 text-center font-semibold hover:bg-blue-600">
            <i class="fas fa-home mb-1"></i><br>Home
          </a>
          <a href="Adminpenel.html" class="p-4 rounded-lg bg-green-500 text-center font-semibold hover:bg-green-600">
            <i class="fas fa-user-shield mb-1"></i><br>Booking
          </a>
          <a href="Userchat.html" class="p-4 rounded-lg bg-purple-500 text-center font-semibold hover:bg-purple-600">
            <i class="fas fa-tv mb-1"></i><br>Services
          </a>
          <a href="#" class="p-4 rounded-lg bg-red-500 text-center font-semibold hover:bg-red-600">
            <i class="fas fa-clock mb-1"></i><br>Change Time
          </a>
          <a href="#" class="p-4 rounded-lg bg-indigo-500 text-center font-semibold hover:bg-indigo-600">
            <i class="fas fa-trash mb-1"></i><br>Remove Something
          </a>
          <a href="#" class="p-4 rounded-lg bg-teal-500 text-center font-semibold hover:bg-teal-600">
            <i class="fas fa-map-marker-alt mb-1"></i><br>Add Location
          </a>
          <a href="#" class="p-4 rounded-lg bg-orange-500 text-center font-semibold hover:bg-orange-600">
            <i class="fas fa-bus mb-1"></i><br>Add Buses
          </a>
        </div>

      </div>

      <!-- Bottom Bar -->
      <div
        class="fixed bottom-0 left-0 w-full text-white border-t bg-[#1a62a3] px-4 py-3 flex items-center justify-between text-sm shadow-md z-50">

        <!-- Left Side -->
        <div onclick="window.location.href='Owner.html'" class="cursor-pointer">
          <div class="font-semibold text-white">Whereis My Bus</div>
          <div class="text-xs text-gray-200">Whereismybus.com</div>
        </div>

        <!-- Right Side -->
        <button title="Profile" onclick="window.location.href='Orderlist.html'"
          class="text-white hover:text-gray-200 transition">
          <i class="fas fa-user text-lg"></i>
        </button>

      </div>
    </nav>
  </div>
  <!-- Overlay -->
  <div id="overlay" class="fixed inset-0 bg-black bg-opacity-30 hidden z-[50]" aria-hidden="true"></div>

  <script>

    const mobileMenuButton = document.getElementById("mobile-menu-button");
    const mobileMenuClose = document.getElementById("mobile-menu-close");
    const mobileNav = document.getElementById("mobile-nav");


    function openMenu() {
      mobileNav.classList.remove("-translate-x-full");
      overlay.classList.remove("hidden");
      document.body.style.overflow = "hidden";
    }

    function closeMenu() {
      mobileNav.classList.add("-translate-x-full");
      overlay.classList.add("hidden");
      document.body.style.overflow = "";
    }

    mobileMenuButton.addEventListener("click", openMenu);
    mobileMenuClose.addEventListener("click", closeMenu);
    overlay.addEventListener("click", closeMenu);

    // Modal
    const openBtn = document.getElementById("openModalBtn");
    const closeBtn = document.getElementById("closeModalBtn");
    const closeBtnFooter = document.getElementById("closeModalBtnFooter");
    const modalOverlay = document.getElementById("modalOverlay");
    const modalBox = document.getElementById("modalBox");

    function openModal() {
      modalOverlay.classList.remove("opacity-0", "pointer-events-none");
      modalOverlay.classList.add("opacity-100");
      modalBox.classList.remove("opacity-0", "scale-95", "fade-out");
      modalBox.classList.add("fade-in");
    }

    function closeModal() {
      modalBox.classList.remove("fade-in");
      modalBox.classList.add("fade-out");
      modalOverlay.classList.remove("opacity-100");
      modalOverlay.classList.add("opacity-0");

      setTimeout(() => {
        modalOverlay.classList.add("pointer-events-none");
        modalBox.classList.remove("fade-out");
        modalBox.classList.add("opacity-0", "scale-95");
      }, 300);
    }

    openBtn.addEventListener("click", openModal);
    closeBtn.addEventListener("click", closeModal);
    closeBtnFooter.addEventListener("click", closeModal);
    modalOverlay.addEventListener("click", (e) => {
      if (e.target === modalOverlay) closeModal();
    });
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && !modalOverlay.classList.contains("pointer-events-none")) {
        closeModal();
      }
    });



    // Show modal
    function showModal() {
      modalOverlay.classList.remove("opacity-0", "pointer-events-none");
      modalBox.classList.remove("opacity-0", "scale-95");
      modalOverlay.classList.add("opacity-100");
      modalBox.classList.add("opacity-100", "scale-100");
    }

    // Search input
    const firstinput = document.getElementById("firstinput");
    const searchbtn = document.getElementById("searchbtn");

    window.addEventListener("load", () => {
      firstinput.focus();
      firstinput.select();
    });

    function redirectToCourse() {
      const value = firstinput.value.trim();
      if (value !== "") {
        window.location.href = `Courselist.html?search=${encodeURIComponent(value)}`;
      }
    }

    firstinput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        redirectToCourse();
      }
    });
    searchbtn.addEventListener("click", redirectToCourse);

    // Menu toggle
    function toggleMenu() {
      document.getElementById("menu").classList.toggle("hidden");
    }
    // Simulate progress (alternative random style)
    function simulateProgress(callback) {
      let progress = 0;
      const interval = setInterval(() => {
        if (progress >= 100) {
          clearInterval(interval);
          progress = 100;
          progressBar.style.width = "100%";
          progressText.innerText = "100%";
          statusText.innerText = "App Installed!";
          audio.play();
          setTimeout(() => (appDownload.style.display = "none"), 2000);
          callback();
        } else {
          progress += 5 + Math.random() * 10;
          if (progress > 100) progress = 100;
          progressBar.style.width = `${progress}%`;
          progressText.innerText = `${Math.floor(progress)}%`;
        }
      }, 200);
    }

  </script>
  <!-- Loader -->
  <div id="loader" class="hidden fixed inset-0 bg-black/40 flex items-center justify-center z-50">
    <div class="w-12 h-12 border-4 border-white border-t-transparent rounded-full animate-spin"></div>
  </div>

  <!-- Main Box (Dial Pad) -->
  <div id="mainBox" class="w-full mx-auto fixed bottom-0  overflow-hidden">

    <!-- Header -->
    <div class="p-4 text-center">
      <h1 class="text-lg font-bold">Ticket Checker</h1>
      <p class="text-xs text-gray-500">Enter Passcode or Mobile</p>
    </div>

    <div class="p-3  bg-white ">

      <!-- Input -->
      <input id="filterInput" type="text" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
        class="w-full bg-gray-100 rounded-lg p-3 text-center focus:outline-none text-lg font-bold mb-4 tracking-widest shadow-inner"
        readonly />

      <!-- Keypad -->
      <div class="grid grid-cols-3 gap-3 text-lg font-bold">
        <button class="key bg-gray-100 py-3 rounded-lg shadow active:scale-95">1</button>
        <button class="key bg-gray-100 py-3 rounded-lg shadow active:scale-95">2</button>
        <button class="key bg-gray-100 py-3 rounded-lg shadow active:scale-95">3</button>
        <button class="key bg-gray-100 py-3 rounded-lg shadow active:scale-95">4</button>
        <button class="key bg-gray-100 py-3 rounded-lg shadow active:scale-95">5</button>
        <button class="key bg-gray-100 py-3 rounded-lg shadow active:scale-95">6</button>
        <button class="key bg-gray-100 py-3 rounded-lg shadow active:scale-95">7</button>
        <button class="key bg-gray-100 py-3 rounded-lg shadow active:scale-95">8</button>
        <button class="key bg-gray-100 py-3 rounded-lg shadow active:scale-95">9</button>

        <button id="clearBtn" class="bg-red-100 text-red-600 py-3 rounded-lg shadow active:scale-95">
          C
        </button>

        <button class="key bg-gray-100 py-3 rounded-lg shadow active:scale-95">0</button>

        <button id="deleteBtn" class="bg-yellow-100 text-yellow-700 py-3 rounded-lg shadow active:scale-95">
          âŒ«
        </button>
      </div>

      <!-- Check Button -->
      <button id="checkBtn"
        class="w-full mt-4 bg-[#1a62a3] text-white py-3 rounded-lg font-bold text-base shadow-lg transition">
        Check Ticket
      </button>

    </div>
  </div>


  <!-- Ticket Result -->
  <div id="result" class="hidden w-full "></div>

  <script>
    const API_URL =
      "https://script.google.com/macros/s/AKfycbzkdg6vHCPXYmo8LdLB6Bk6c6hWzqpGNiAzWHBORtIVntStTPPxOTHo3buy31fMhO1Z_g/exec";

    const input = document.getElementById("filterInput");
    const keys = document.querySelectorAll(".key");
    const clearBtn = document.getElementById("clearBtn");
    const deleteBtn = document.getElementById("deleteBtn");
    const checkBtn = document.getElementById("checkBtn");
    const loader = document.getElementById("loader");
    const result = document.getElementById("result");
    const mainBox = document.getElementById("mainBox");

    // Keypad input
    keys.forEach((btn) => {
      btn.addEventListener("click", () => {
        if (input.value.length < 15) {
          input.value += btn.textContent;
        }
      });
    });

    // Clear input
    clearBtn.addEventListener("click", () => {
      input.value = "";
    });

    // Delete last digit
    deleteBtn.addEventListener("click", () => {
      input.value = input.value.slice(0, -1);
    });

    // Check ticket
    checkBtn.addEventListener("click", (e) => {
      e.preventDefault();
      fetchData();
    });

    async function fetchData() {
      const value = input.value.trim();
      if (!value) {
        alert("Enter passcode or mobile number");
        return;
      }

      loader.classList.remove("hidden");

      try {
        const res = await fetch(API_URL);
        const json = await res.json();

        const data = Array.isArray(json) ? json : json.data;

        const match = data.find((row) => {
          const pass = String(row.Passcode || "").trim();
          const mobile = String(row.Usermobile || "").trim();
          return pass === value || mobile === value;
        });

        loader.classList.add("hidden");

        if (match) {
          showTicket(match);
        } else {
          alert("Ticket not found");
        }
      } catch (err) {
        loader.classList.add("hidden");
        alert("Error loading data");
        console.error(err);
      }
    }

    function showTicket(match) {
      mainBox.classList.add("hidden");
      result.innerHTML = `
<div class="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4">

  <!-- Ticket Card -->
  <div class="bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden relative animate-fadeIn">

    <!-- HEADER -->
    <div class="bg-gradient-to-r from-emerald-600 to-green-700 text-white p-4 flex items-center gap-3">

      <!-- Seat Circle -->
      <div class="w-14 h-14 bg-white text-emerald-700 font-bold text-xl rounded-full shadow flex items-center justify-center">
        ${match.Seat || "-"}
      </div>

      <div>
        <h2 class="text-lg font-bold tracking-wide">${match.TBName || "-"}</h2>
        <p class="text-sm opacity-90">${match.TBNumber || "-"}</p>
      </div>

    </div>

    <!-- ROUTE SECTION -->
    <div class="p-5 border-b">

      <div class="flex justify-between text-xs text-gray-400 mb-1 uppercase tracking-wider">
        <span>From</span>
        <span>To</span>
      </div>

      <div class="flex items-center justify-between font-bold text-lg text-gray-800">
        <span>${match.TStart || "-"}</span>
        <div class="flex-1 border-t border-dashed mx-2"></div>
        <span>${match.TEnd || "-"}</span>
      </div>
    </div>

    <!-- PASSENGER INFO -->
    <div class="p-5 grid grid-cols-2 gap-4 text-sm border-b">

      <div>
        <p class="text-gray-400 text-xs">Passenger</p>
        <p class="font-semibold text-gray-800">
          ${match.Username || ""} ${match.Userlast || ""}
        </p>
      </div>

      <div>
        <p class="text-gray-400 text-xs">Mobile</p>
        <p class="font-semibold text-gray-800">${match.Usermobile || "-"}</p>
      </div>

      <div>
        <p class="text-gray-400 text-xs">Age</p>
        <p class="font-semibold text-gray-800">${match.Age || "-"}</p>
      </div>

      <div>
        <p class="text-gray-400 text-xs">Gender</p>
        <p class="font-semibold text-gray-800">${match.Gender || "-"}</p>
      </div>

       <div>
        <p class="text-gray-400 text-xs"Time</p>
        <p class="font-semibold text-gray-800">$${match.Time || "-"}</p>
      </div>

       <div>
        <p class="text-gray-400 text-xs" Date</p>
        <p class="font-semibold text-gray-800">$${match.Date || "-"}</p>
      </div>
 
    </div>

    <!-- CLASS / PRICE STRIP -->
    <div class="bg-gray-50 px-5 py-3 flex justify-between items-center text-sm border-b">

      <div>
        <p class="text-gray-400 text-xs">Class</p>
        <p class="font-semibold">${match.Class || "-"}</p>
      </div>

      <div class="text-center">
        <p class="text-gray-400 text-xs">Child</p>
        <p class="font-semibold">${match.Child || "0"}</p>
      </div>

      <div class="text-right">
        <p class="text-gray-400 text-xs">Total Fare</p>
        <p class="font-bold text-emerald-600 text-lg">â‚¹ ${match.Price || "-"}</p>
      </div>

    </div>

    <!-- PASSCODE + QR -->
    <div class="p-5 flex items-center justify-between">

      <div id="qrcode" class="w-14 h-14"></div>

      <div class="text-right">
        <p class="text-gray-400 text-xs">Booking ID</p>
        <p class="font-bold text-emerald-700 text-xl tracking-widest">
          ${match.Passcode || "-"}
        </p>
      </div>
    </div>
  </div>

  <!-- Bottom Button -->
  <button id="backBtn"
    class="fixed bottom-3 left-4 right-4 max-w-md mx-auto bg-[#1a62a3] hover:bg-[#154f83] text-white py-3 rounded-xl font-bold text-base shadow-xl transition">
    Check Another Ticket
  </button>

</div>
`;
      result.classList.remove("hidden");

      // Generate QR
      const qrText = `
Passcode: ${match.Passcode}
Name: ${match.Username} ${match.Userlast}
Seat: ${match.Seat}
From: ${match.TStart}
To: ${match.TEnd}
      `;

      new QRCode(document.getElementById("qrcode"), {
        text: qrText,
        width: 120,
        height: 120,
      });

      // Back button
      document.getElementById("backBtn").onclick = () => {
        result.classList.add("hidden");
        mainBox.classList.remove("hidden");
        input.value = "";
      };
    }
  </script>
</body>

</html>